<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>运营费计算</title>

<!-- 最新版本的 Bootstrap 核心 CSS 文件 -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

</head>

<body>
 <div class="jumbotron">
  <h1>平台运营费用收取计算</h1>
  <p>输入近期收入，可对本月运营费用进行预估。</p>
</div>

<div class="panel panel-info">
  <div class="panel-heading">费用计算<a href="https://star-services.udesk.cn/hc/articles/172853" target="_blank"><span class="glyphicon glyphicon-question-sign" aria-hidden="true"></span></a></div>
  <div class="panel-body">
    <div class="input-group">
     <span class="input-group-addon">加入前第1个月收入</span>
     <input id="first_month" type="text" class="form-control" placeholder="0" aria-describedby="sizing-addon2">
    </div>
    <div class="input-group">
     <span class="input-group-addon">加入前第2个月收入</span>
     <input id="second_month" type="text" class="form-control" placeholder="0" aria-describedby="sizing-addon2">
    </div>
    <div class="input-group">
     <span class="input-group-addon">加入前第3个月收入</span>
     <input id="third_month" type="text" class="form-control" placeholder="0" aria-describedby="sizing-addon2">
    </div>
    <div class="input-group">
     <span class="input-group-addon">&nbsp&nbsp&nbsp&nbsp&nbsp本 &nbsp月 &nbsp收 &nbsp入&nbsp&nbsp&nbsp&nbsp&nbsp</span>
     <input id="current_income" type="text" class="form-control" placeholder="0" aria-describedby="sizing-addon2">
    </div>
    <button id="start_btn" type="button" class="btn btn-success btn-block btn-lg">
      <span class="glyphicon glyphicon-yen" aria-hidden="true"></span>
      开始计算
    </button>
  </div>
</div> 
<div class="panel panel-info">
  <div class="panel-heading">估算结果(以实际结果为准)</div>

  <div class="panel-body">
    <button class="btn btn-info" type="button">
      加入前初始月收入：<span class="badge" id="res1">?</span>
    </button>
    <button class="btn btn-info" type="button">
      收入增长：<span class="badge" id="res2">?</span>
    </button>
    <button class="btn btn-primary" type="button">
      本月运营费估算：<span class="badge" id="res3">?</span>
    </button>
  </div>
</div>
 
 <script type="text/javascript" src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-3.5.1.min.js"></script>
 <!-- 最新的 Bootstrap 核心 JavaScript 文件 -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>


<script>

  $("#start_btn").click(function() {
    var first_month = Number($("#first_month").val() ? $("#first_month").val() : 0);
    var second_month = Number($("#second_month").val() ? $("#second_month").val() : 0);
    var third_month = Number($("#third_month").val() ? $("#third_month").val() : 0);
    var current_income = Number($("#current_income").val() ? $("#current_income").val() : 0);

    var avg = (first_month + second_month + third_month) / 3.0;
    var diff = current_income - avg;

    $("#res1").text(avg.toFixed(2));
    $("#res2").text(diff.toFixed(2));

    diff = diff > 0 ? diff:0;

    var quick = [0,     50,    225,   800,  2250];
    var start = [1500,  2000,  3500, 7500, 15000];
    var percent = [0.1, 0.15, 0.20, 0.30,  0.40]

    var cost = 0;
    for (let i = start.length - 1; i >= 0; i--) {
      if (diff > start[i]) {
        cost += (diff - start[i]) * percent[i];
        while(i>0) {
          cost+=quick[i];
          i--;
        }
        break;
      }
    }
    $("#res3").text(cost.toFixed(2));


  });
  



</script>

</body>
</html>
